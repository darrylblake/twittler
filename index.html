<!DOCTYPE html>
<html>
    <head>
        <script src="jquery.js"></script>
        <script src="data_generator.js"></script>
    </head>
    <body>
        <script>
            $(document).ready(function(){

                var $body = $('body');
                $body.html('');

                function displayStream(length) {
                    var index = streams.home.length - 1;
                    while(index >= length){
                        var tweet = streams.home[index];
                        var $tweet = $('<div></div>');
                        $tweet.text('@' + tweet.user + ': ' + tweet.message + ' - ' + tweet.created_at);
                        $tweet.prependTo($body);
                        index -= 1;
                    }
                    return streams.home.length;
                }

                var length = displayStream(0);

                function checkStream() {
                    setInterval(function(){
                        if (streams.home.length > length)
                            length = displayStream(length);
                    }, 2000);
                }
                checkStream();
            });

        </script>
    </body>
</html>
