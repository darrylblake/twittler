$(document).ready(function(){function e(e){function a(e,s){for(;s<=e.length-1;){var a=e[s],n='<time class="timeago" datetime="'+a.created_at.toISOString()+'">'+a.created_at.toLocaleDateString()+"</time>",r=t[a.user]?t[a.user]:"static/layout/avatar.png",i='<img class="avatar" src="'+r+'">',o='<span class="user">@'+a.user+"</span>",c='<span class="message">'+a.message+"</span>",m=$('<div class="tweet" data-user="'+a.user+'"></div>').hide();m.html(i+o+c+n),m.prependTo($("#tweets")),m.slideDown().fadeIn(),s++,$(".timeago").timeago()}return s}clearInterval(s),$("#tweets").html("");var n=a(e,0);s=setInterval(function(){e.length>n&&(n=a(e,n))},250)}var t={douglascalhoun:"https://media.licdn.com/media/p/4/000/149/320/1c2f421.jpg",mracus:"https://media.licdn.com/media/p/8/005/05d/0b0/2645c4a.jpg",shawndrost:"https://pbs.twimg.com/profile_images/586651979348250624/3n3kd_5P.jpg"},s,a=streams.home;$("nav").on("click",".refresh",function(){e(a)}),e(streams.home),$("#tweets").on("click",".tweet",function(){a=streams.users[$(this).data("user")],e(a)}),$("nav").on("click",".home",function(){a=streams.home,e(a)}),$(".post-tweet").on("click","button",function(e){var t=$(this).closest("form");window.visitor=t.find('[name="username"]').val(),streams.users[visitor]||(streams.users[visitor]=[]);var s=t.find('[name="message"]').val();writeTweet(s),e.preventDefault()})});